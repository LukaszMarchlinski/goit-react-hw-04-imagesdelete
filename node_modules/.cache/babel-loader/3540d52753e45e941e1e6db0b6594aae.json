{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\48531\\\\Documents\\\\GitHub\\\\goit\\\\goit-react-hw-03-image-finder\\\\src\\\\components\\\\App.jsx\";\nimport React, { Component } from 'react';\nimport css from './App.module.css';\nimport searchImages from 'services/pixabay';\nimport Searchbar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\nimport Loader from './Loader/Loader';\nimport Button from './Button/Button';\nimport Modal from './Modal/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      query: '',\n      page: 1,\n      images: [],\n      totalHits: null,\n      isLoading: false,\n      isError: false,\n      isModalOpen: false,\n      modalURL: ''\n    };\n\n    this.onSubmitInput = query => {\n      this.setState({\n        query: query\n      });\n      const {\n        page\n      } = this.state;\n      searchImages(query, page);\n    };\n\n    this.showResponse = async () => {\n      const {\n        query,\n        page\n      } = this.state;\n\n      try {\n        const response = await searchImages(query, page);\n        this.setState(prevState => ({\n          totalHits: response.data.total,\n          images: [...prevState.images, ...response.data.hits]\n        }));\n      } catch (error) {\n        this.setState({\n          isError: true,\n          isLoading: false\n        });\n      } finally {\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n\n    this.loadMoreButton = e => {\n      this.setState(prevState => ({\n        page: prevState.page + 1\n      }));\n    };\n\n    this.closeModalByEscape = e => {\n      if (e.key === 'Escape') {\n        this.setState({\n          isModalOpen: false\n        });\n      }\n    };\n\n    this.closeModalByOverlay = e => {\n      if (e.target.name !== 'IMG') {\n        this.setState({\n          isModalOpen: false\n        });\n      }\n    };\n\n    this.imageClicked = e => {\n      e.preventDefault();\n      const url = e.target.dataset['src'];\n      this.setState({\n        isModalOpen: true,\n        modalURL: url\n      });\n    };\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    const {\n      query,\n      page\n    } = this.state;\n\n    if (prevState.page !== page) {\n      this.setState({\n        isLoading: true\n      });\n      this.showResponse();\n    } else if (prevState.query !== query) {\n      this.setState({\n        isLoading: true\n      });\n      this.setState({\n        images: []\n      });\n      this.showResponse();\n    }\n  }\n\n  render() {\n    const {\n      query,\n      images,\n      totalHits,\n      page,\n      isLoading,\n      isError,\n      modalURL,\n      isModalOpen\n    } = this.state;\n    const totalPages = Math.ceil(totalHits / 12);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: css.App,\n        children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n          onSubmitInput: this.onSubmitInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this), images.length > 0 && /*#__PURE__*/_jsxDEV(ImageGallery, {\n          children: /*#__PURE__*/_jsxDEV(ImageGalleryItem, {\n            images: images,\n            onClick: this.imageClicked\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), isError && alert(\"Ups, coś poszło nie tak. Spróbuj wyszukać coś innego.\"), isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 23\n        }, this), page < totalPages && /*#__PURE__*/_jsxDEV(Button, {\n          loadMoreButton: this.loadMoreButton,\n          titleButton: \"Load more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }, this), isModalOpen && /*#__PURE__*/_jsxDEV(Modal, {\n        closeModalByEscape: this.closeModalByEscape,\n        closeModalByOverlay: this.closeModalByOverlay,\n        src: modalURL,\n        alt: query\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/48531/Documents/GitHub/goit/goit-react-hw-03-image-finder/src/components/App.jsx"],"names":["React","Component","css","searchImages","Searchbar","ImageGallery","ImageGalleryItem","Loader","Button","Modal","App","state","query","page","images","totalHits","isLoading","isError","isModalOpen","modalURL","onSubmitInput","setState","showResponse","response","prevState","data","total","hits","error","loadMoreButton","e","closeModalByEscape","key","closeModalByOverlay","target","name","imageClicked","preventDefault","url","dataset","componentDidUpdate","_prevProps","render","totalPages","Math","ceil","length","alert"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport css from './App.module.css';\nimport searchImages from 'services/pixabay';\nimport Searchbar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\nimport Loader from './Loader/Loader';\nimport Button from './Button/Button';\nimport Modal from './Modal/Modal';\n\nexport class App extends Component {\n  state = {\n    query: '',\n    page: 1,\n    images: [],\n    totalHits: null,\n    isLoading: false,\n    isError: false,\n    isModalOpen: false,\n    modalURL: '',\n  };\n\n  onSubmitInput = query => {\n    this.setState({ query: query });\n    const { page } = this.state;\n    searchImages(query, page);\n  };\n\n  showResponse = async () => {\n    const { query, page } = this.state;\n    try {\n      const response = await searchImages(query, page);\n      this.setState(prevState => ({\n        totalHits: response.data.total,\n        images: [...prevState.images, ...response.data.hits],\n      }));\n    } catch (error) {\n      this.setState({ isError: true, isLoading: false })\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  };\n\n  componentDidUpdate(_prevProps, prevState) {\n    const { query, page } = this.state;\n    if (prevState.page !== page) {\n      this.setState({ isLoading: true });\n      this.showResponse();\n    } else if (prevState.query !== query) {\n      this.setState({ isLoading: true });\n      this.setState({ images: [] });\n      this.showResponse();\n    }\n  };\n\n  loadMoreButton = e => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  closeModalByEscape = e => {\n    if (e.key === 'Escape') {\n      this.setState({ isModalOpen: false });\n    }\n  };\n\n  closeModalByOverlay = e => {\n    if (e.target.name !== 'IMG') {\n      this.setState({ isModalOpen: false });\n    }\n  };\n\n  imageClicked = e => {\n    e.preventDefault();\n    const url = e.target.dataset['src'];\n    this.setState({ isModalOpen: true, modalURL: url });\n  };\n\n\n  render() {\n    const { query, images, totalHits, page, isLoading, isError, modalURL, isModalOpen } = this.state;\n    const totalPages = Math.ceil(totalHits / 12);\n\n    return (\n      <>\n      <div className={css.App}>\n        <Searchbar onSubmitInput={this.onSubmitInput} />\n        {images.length > 0 && (\n          <ImageGallery>\n              <ImageGalleryItem images={images} onClick={this.imageClicked} />\n          </ImageGallery>)\n        }\n        {isError && alert(\"Ups, coś poszło nie tak. Spróbuj wyszukać coś innego.\")}\n        {isLoading && <Loader/>}\n        {page < totalPages && <Button loadMoreButton={this.loadMoreButton} titleButton={\"Load more\"} />}\n        </div>\n        {isModalOpen && <Modal\n          closeModalByEscape={this.closeModalByEscape}\n          closeModalByOverlay={this.closeModalByOverlay}\n          src={modalURL}\n          alt={query} />}\n        </>\n    );\n  };\n}"]},"metadata":{},"sourceType":"module"}